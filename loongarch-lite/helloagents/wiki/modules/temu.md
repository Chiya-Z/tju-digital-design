# TEMU

## ç›®çš„
æä¾› LoongArch32 æŒ‡ä»¤é›†ä»¿çœŸå™¨ä¸äº¤äº’å¼ç›‘æ§å™¨ï¼Œç”¨äºè¿è¡Œæµ‹è¯•ç¨‹åºå¹¶è¾…åŠ©è°ƒè¯•ã€‚

## æ¨¡å—æ¦‚è¿°
- **èŒè´£:** æŒ‡ä»¤è¯‘ç ä¸æ‰§è¡Œã€å¯„å­˜å™¨ä¸å†…å­˜æ¨¡å‹ã€ç›‘æ§å™¨ UIï¼ˆreadlineï¼‰ã€è¡¨è¾¾å¼ä¸æ–­ç‚¹/ç›‘è§†ç‚¹ï¼ˆè‹¥æ‰©å±•ï¼‰
- **çŠ¶æ€:** ğŸš§å¼€å‘ä¸­
- **æœ€åæ›´æ–°:** 2025-12-27

## è§„èŒƒ

### éœ€æ±‚: åŸºç¡€äº¤äº’å‘½ä»¤
**æ¨¡å—:** TEMU
ä¿æŒ `help/c/q` ç­‰åŸºç¡€å‘½ä»¤å¯ç”¨ï¼Œå¹¶æ”¯æŒåç»­æ‰©å±•æ›´å¤šè°ƒè¯•å‘½ä»¤ã€‚

#### åœºæ™¯: è¿è¡Œä¸äº¤äº’
- åœ¨ `TEMU/` ä¸‹æ‰§è¡Œ `make run` å¯åŠ¨
- åœ¨ `(temu)` æç¤ºç¬¦ä¸‹è¾“å…¥ `help` æŸ¥çœ‹å‘½ä»¤

### éœ€æ±‚: ç®€æ˜“è°ƒè¯•å™¨ï¼ˆtask2ï¼‰
**æ¨¡å—:** TEMU
å®ç°å¸¸ç”¨è°ƒè¯•å‘½ä»¤ï¼šå•æ­¥ã€å¯„å­˜å™¨/PC æŸ¥çœ‹ã€è¡¨è¾¾å¼æ±‚å€¼ã€å†…å­˜æ‰«æä¸ç›‘è§†ç‚¹ã€‚

#### åœºæ™¯: è°ƒè¯•å‘½ä»¤
- `si [N]`ï¼šå•æ­¥æ‰§è¡Œ N æ¡æŒ‡ä»¤ï¼ˆç¼ºçœ 1ï¼‰
- `info r` / `info pc`ï¼šæ‰“å°å¯„å­˜å™¨/PCï¼ˆ`info w` å¯æŸ¥çœ‹ç›‘è§†ç‚¹åˆ—è¡¨ï¼‰
- `p EXPR`ï¼šè¡¨è¾¾å¼æ±‚å€¼ï¼ˆå¯„å­˜å™¨/åè¿›åˆ¶/åå…­è¿›åˆ¶/ç®—æœ¯/æ‹¬å·/è§£å¼•ç”¨/é€»è¾‘è¿ç®—ï¼‰
- `x N EXPR`ï¼šä»åœ°å€ EXPR å¼€å§‹æ‰“å° N ä¸ªå­—ï¼ˆ4Bï¼‰
- `w EXPR`ï¼šè®¾ç½®ç›‘è§†ç‚¹ï¼ˆè¡¨è¾¾å¼å€¼å˜åŒ–å³æš‚åœï¼‰
- `d N`ï¼šåˆ é™¤ç¼–å·ä¸º N çš„ç›‘è§†ç‚¹
> æ”¯æŒè¿ç®—ç¬¦: `+ - * / == != && || !`ï¼ˆ`*` åœ¨è¡¨è¾¾å¼å¼€å¤´æˆ–ç´§è·Ÿè¿ç®—ç¬¦/å·¦æ‹¬å·æ—¶è§†ä¸ºè§£å¼•ç”¨ï¼‰ã€‚

### éœ€æ±‚: golden traceï¼ˆtask3ï¼‰
**æ¨¡å—:** TEMU
ç”ŸæˆæŒ‡ä»¤æ‰§è¡Œçš„ golden traceï¼šé™¤åˆ†æ”¯ä¸ Store æŒ‡ä»¤å¤–ï¼Œè®°å½•æ¯æ¡â€œå†™å¯„å­˜å™¨â€æŒ‡ä»¤çš„ PC ä¸å†™å›ä¿¡æ¯ã€‚

#### åœºæ™¯: trace ç”Ÿæˆ
- è¾“å‡ºè·¯å¾„: `TEMU/temu/trace/golden_trace.txt`
- åˆ—æ ¼å¼: `pc reg val`ï¼ˆè¡¨å¤´ä¸ºç¬¬ä¸€è¡Œï¼‰
  - `pc` / `val`ï¼š32-bit åå…­è¿›åˆ¶ï¼ˆä¸å¸¦ `0x`ï¼‰
  - `reg`ï¼šåè¿›åˆ¶å¯„å­˜å™¨ç¼–å·ï¼ˆä¸ªä½æ•°è¡¥ `0` å¯¹é½ï¼‰

### éœ€æ±‚: task1 æŒ‡ä»¤å®ç°ï¼ˆLoongArch32ï¼‰
**æ¨¡å—:** TEMU
åœ¨æ¡†æ¶ä»£ç åŸºç¡€ä¸Šè¡¥å…¨ LoongArch32 å¸¸ç”¨æŒ‡ä»¤çš„è¯‘ç ä¸æ‰§è¡Œé€»è¾‘ï¼ˆ32 ä½ã€å°ç«¯ï¼‰ï¼Œç”¨äºæ”¯æ’‘æµ‹è¯•ç¨‹åºè¿è¡Œä¸åç»­æ‰©å±•ã€‚

#### åœºæ™¯: è¯‘ç ä¸æ‰§è¡Œ
- i12-typeï¼š`addi.w`ã€`ori`ã€`andi`ã€`st.w`ã€`ld.w`ã€`st.b`ã€`ld.b`
- 3r-typeï¼š`add.w`ã€`or`ã€`xor`ã€`slt`ã€`srai.w`
- i20-typeï¼š`lu12i.w`ã€`pcaddu12i`
- i16-typeï¼š`beq`ã€`bne`ã€`bge`
> å¤‡æ³¨: è§£ç æ˜ å°„æŒ‰æŒ‡ä»¤ç¼–ç æ ¼å¼å®ç°ï¼ˆä»¥ `instr[31:26]` ä¸ºä¸» opcodeï¼›`opcode1==0` æ—¶è¿›ä¸€æ­¥ä½¿ç”¨ `instr[25:22]` ä¸ `instr[21:15]` åˆ†ç»„ï¼‰ã€‚

## APIæ¥å£

### äº¤äº’å¼å‘½ä»¤
- `help`ï¼šå‘½ä»¤åˆ—è¡¨
- `c`ï¼šæŒç»­æ‰§è¡Œ
- `q`ï¼šé€€å‡º

## æ•°æ®æ¨¡å‹
- å¯„å­˜å™¨ï¼š`TEMU/temu/include/cpu/reg.h`
- å†…å­˜ï¼š`TEMU/temu/include/memory/memory.h`

## ä¾èµ–
- æµ‹è¯•ç¨‹åºé•œåƒï¼š`inst.bin` / `data.bin`ï¼ˆç”± `loongarch_sc` ç”Ÿæˆï¼‰

## å˜æ›´å†å²
- [202512261819_temu_task1_instructions](../../history/2025-12/202512261819_temu_task1_instructions/) - è¡¥å…¨ task1 æŒ‡ä»¤é›†å®ç°ä¸è§£ç è¡¨
- [202512271113_temu_task2_debugger](../../history/2025-12/202512271113_temu_task2_debugger/) - å¢åŠ ç®€æ˜“è°ƒè¯•å™¨å‘½ä»¤ä¸è¡¨è¾¾å¼/ç›‘è§†ç‚¹æ”¯æŒ
- [202512271147_temu_task3_golden_trace](../../history/2025-12/202512271147_temu_task3_golden_trace/) - å¢åŠ  trace æ¨¡å—å¹¶è¾“å‡º golden trace
